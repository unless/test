name: ğŸ’¿ St1_hook
on:
  workflow_dispatch:
    inputs:
      network_settings:
        description: "è¯·é€‰æ‹©åˆå§‹ç½‘ç»œé…ç½®"
        required: true
        default: 'static'
        type: choice
        options:
          - 'static'
          - 'dhcp'
      ipaddr:
        description: 'è¯·è¾“å…¥ç®¡ç†IPï¼ˆé™æ€åœ°å€æ—¶å¿…å¡«ï¼‰'
        required: true
        default: '192.168.111.1'
      gateway:
        description: 'è¯·è¾“å…¥é»˜è®¤ç½‘å…³ï¼ˆé™æ€åœ°å€æ—¶å¿…å¡«ï¼‰'
        required: true
        default: '192.168.5.1'
      include_docker:
        description: "æ˜¯å¦é›†æˆDockeræ’ä»¶"
        required: true
        default: 'yes'
        type: choice
        options:
          - 'yes'
          - 'no'
      ib_Version:
        description: 'è¯·é€‰æ‹©éœ€è¦çš„ç‰ˆæœ¬'
        required: false
        default: 'new'
        type: choice
          - '2025-10-19'
        options:
          - 'new'
          - '2025-10-19'
          - '2025-09-30'
          - '2025-10-15'
      repo_settings:
        description: "unless/iStoreOS-Actions"
        required: true
        default: "unless/iStoreOS-Actions"
        
env:
  VERSION: 24.10.3

jobs:
  build:
    runs-on: ubuntu-22.04
    steps:
    - name: Checkout code
      uses: actions/checkout@v3
  notify-webhook:
    name: 'ğŸ“¢ Webhooké€šçŸ¥'
    runs-on: ubuntu-latest
    steps:
      - name: å‘é€Webhooké€šçŸ¥
        run: |
        
          # æ„å»ºé€šçŸ¥æ¶ˆæ¯
          MESSAGE="å·¥ä½œæµçŠ¶æ€: ${{ job.status }}<br>"
          MESSAGE+="å·¥ä½œæµåç§°: ${{ github.workflow }}<br>"
          MESSAGE+="è¿è¡ŒID: ${{ github.run_id }}\n"
          MESSAGE+="è§¦å‘äº‹ä»¶: ${{ github.event_name }}<br>"
          MESSAGE+="æäº¤: ${{ github.sha }}\n"
          MESSAGE+="è¯¦æƒ…: https://github.com/${{ github.repository }}/actions/runs/${{ github.run_id }}"

          # å‘é€åˆ°Webhook
          curl -X POST \
            -H "Content-Type: application/json" \
            -d '{
              "content": "GitHub Actions é€šçŸ¥",
              "embeds": [{
                "title": "å·¥ä½œæµå®Œæˆé€šçŸ¥",
                "description": "'"${MESSAGE}"'",
              }]
            }' \
            "${{ secrets.WEBHOOK_URL }}"
        env:
          WEBHOOK_URL: ${{ secrets.WEBHOOK_URL }}
